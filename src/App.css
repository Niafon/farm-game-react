/* Provider Picker */
.provider-picker-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}
.provider-picker {
  background: #111;
  color: #eee;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 16px;
  width: 320px;
}
.provider-picker h3 { margin: 0 0 8px 0; font-size: 16px; }
.provider-picker ul { list-style: none; padding: 0; margin: 8px 0; }
.provider-picker li { margin: 6px 0; }
.provider-picker button { width: 100%; display: flex; align-items: center; gap: 8px; }
.provider-picker .close { margin-top: 8px; }

/* Toasts */
.toast-container {
  position: fixed;
  bottom: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 60;
}
.toast { padding: 10px 12px; border-radius: 6px; color: #111; background: #eaeaea; }
.toast.info { background: #d8ecff; }
.toast.warning { background: #fff3cd; }
.toast.error { background: #ffd6d6; }

/* Crop Selector - iOS style */
.crop-selector {
  position: relative;
}

.crop-selector-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 8px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: inherit;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.crop-selector-btn:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.02);
}

.crop-selector-btn .current-crop {
  font-size: 16px;
}

.crop-selector-btn .arrow {
  font-size: 12px;
  transition: transform 0.2s ease;
}

.crop-selector-btn:hover .arrow {
  transform: translateY(1px);
}

.crop-menu-backdrop {
  position: fixed;
  inset: 0;
  background: transparent;
  z-index: 100;
}

.crop-menu {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 8px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  padding: 8px;
  min-width: 140px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  z-index: 101;
  animation: cropMenuSlide 0.3s ease-out;
}

@keyframes cropMenuSlide {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

.crop-option {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #333;
  font-size: 14px;
  font-weight: 500;
}

.crop-option:hover {
  background: rgba(0, 0, 0, 0.05);
  transform: scale(1.02);
}

.crop-option.selected {
  background: rgba(0, 122, 255, 0.1);
  color: #007AFF;
}

.crop-option .crop-emoji {
  font-size: 18px;
}



.crop-option .check {
  color: #007AFF;
  font-weight: bold;
  font-size: 16px;
}

/* Brewing Machine Button */
.brew-btn {
  background: linear-gradient(135deg, #8B4513, #D2691E);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
}

.brew-btn:hover {
  background: linear-gradient(135deg, #A0522D, #F4A460);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(139, 69, 19, 0.4);
}

.brew-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.3);
}

/* Trees sway animation */
.trees { position: relative; }
.tree { display: inline-block; margin: 0 24px; color: #b8b1a8; transform: scale(1.5); transform-origin: bottom center; }
.tree pre { margin: 0; line-height: 1.05; }
.tree .canopy { display: inline-block; }
.tree .trunk { display: block; transform: translateX(0); margin-top: -2px; }

/* Canopy-only sway (trunk remains fixed) */
@keyframes canopySway {
  0% { transform: translateX(0) rotate(0deg); }
  20% { transform: translateX(-2.5px) rotate(-1deg); }
  40% { transform: translateX(1.5px) rotate(0.6deg); }
  60% { transform: translateX(-1.5px) rotate(-0.6deg); }
  80% { transform: translateX(2.5px) rotate(1deg); }
  100% { transform: translateX(0) rotate(0deg); }
}

.breeze-1 { animation: canopySway 3.6s ease-in-out infinite; }
.breeze-2 { animation: canopySway 4.0s ease-in-out infinite; animation-delay: .3s; }
.breeze-3 { animation: canopySway 4.4s ease-in-out infinite; animation-delay: .6s; }
.garden-bed{
  position: relative;
}
.bed-overlay{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}
.bed-left{
  position: absolute;
  left: 6px;
  top: 0;
  transform: translateY(calc(-100% - 8px));
  display: flex;
  align-items: center;
  gap: 6px;
  pointer-events: auto;
}
.bed-center{
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, calc(-100% - 8px));
  display: flex;
  align-items: center;
  gap: 6px;
  pointer-events: auto;
}
.tx-status{
  font-size: 12px;
}
.wallet-disconnect-btn{
  background: #2d2f36;
  color: #fff;
  border: 1px solid #3c3f47;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}
.wallet-disconnect-btn:hover{
  background: #383b44;
}
      /*
        Core styles for the ASCII farm React UI. Variables are defined
        here so the game can switch to dark mode dynamically.
      */
      :root {
        --main-bg-color: #ececec;
        --border-color: #bfbfbf;
        --text-color: #1a1a1a;
        --icon-color: var(--text-color);
        --accent-color: #8c8c8c;
        --soil-color: #b8b2a6;
        --fence-color: #c2bbb0;
        --well-color: #a5a9af;
        --cloud-color: #d0d0d0;
        --grass-color: #b6bfb6;
        --tree-color: #c2bbb0;
        --glass-bg: linear-gradient(to bottom, rgba(255, 255, 255, 0.45), rgba(255, 255, 255, 0.15));
        --glass-border: rgba(255, 255, 255, 0.6);
        --glass-shadow: 0 4px 14px rgba(31, 38, 135, 0.18), 0 1px 0 rgba(255, 255, 255, 0.35);
        --glass-blur: 14px;
        --window-bg: linear-gradient(
          135deg,
          rgba(255,255,255,0.65) 0%,
          rgba(255,255,255,0.35) 100%
        );
        --window-border: var(--glass-border);
        --window-shadow: var(--glass-shadow);
        --background-gradient: linear-gradient(to bottom, #f5f5f5, #e0e0e0);
        --font-sans: "Manrope", Inter, "Segoe UI", Roboto, Arial, sans-serif;
      }

      * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
          font-family: var(--font-sans);
          text-shadow: none !important;
          word-break: break-word;
          overflow-wrap: anywhere;
      }

      h1, h2, h3, h4, h5, h6 {
          font-family: inherit;
      }

      b, strong {
          font-family: inherit;
          font-weight: bold;
      }

      body {
          background: var(--background-gradient);
          color: var(--text-color);
          display: flex;
          flex-direction: column;
          align-items: center;
          min-height: 100vh;
          overflow-x: hidden;
          overflow-y: scroll;
          position: relative;
          font-size: 16px;
          line-height: 1.5;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          transition: background 1.5s ease, color 1.5s ease;
      }

      .game-container {
          width: 100%;
          max-width: 800px;
          height: 100%;
          display: flex;
          flex-direction: column;
          padding: 20px;
          position: relative;
      }

      /* Inventory styles */
      .inventory-toggle {
          position: fixed;
          top: 20px;
          left: 20px;
          background: var(--window-bg);
          border: none;
          border-radius: 15px;
          padding: 5px 10px;
          cursor: pointer;
          z-index: 100;
          font-size: 1.5rem;
          color: var(--icon-color);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: background-color 1.5s ease, color 1.5s ease;
      }

      .wallet-connect {
          position: fixed;
          top: 20px;
          right: 80px;
          background: var(--window-bg);
          border: none;
          border-radius: 15px;
          padding: 5px 12px;
          cursor: pointer;
          z-index: 100;
          font-size: 1.5rem;
          color: var(--icon-color);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: background-color 1.5s ease, color 1.5s ease;
      }
      .wallet-connect.connected {
          font-size: 1rem;
          font-family: monospace;
          letter-spacing: 0.5px;
      }

      .wallet-panel {
          position: fixed;
          right: 20px;
          top: 60px;
          width: 260px;
          background: var(--window-bg);
          border: 1px solid var(--window-border);
          border-radius: 12px;
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          padding: 12px;
          z-index: 100;
          transform: translateY(-8px);
          opacity: 0;
          pointer-events: none;
          transition: opacity .2s ease, transform .2s ease;
      }
      .wallet-panel.open {
          transform: translateY(0);
          opacity: 1;
          pointer-events: auto;
      }
      .wallet-title { font-size: 1.1rem; margin-bottom: 8px; }
      .wallet-row { display: flex; justify-content: space-between; margin: 6px 0; font-family: monospace; }

.inventory-panel {
          position: fixed;
          left: 0;
          top: 0;
          height: 100vh;
          width: 250px;
          background: var(--window-bg);
          border: 1px solid var(--window-border);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: transform 0.3s ease, background-color 1.5s ease, color 1.5s ease, box-shadow 1.5s ease;
          transform: translateX(-100%);
          z-index: 99;
          padding: 70px 15px 20px;
          overflow-y: auto;
          content-visibility: auto;
          will-change: transform;
          backface-visibility: hidden;
          transform-style: preserve-3d;
      }
      .inventory-panel.open {
          transform: translateX(0);
      }
      .inventory-title {
          font-size: 1.3rem;
          text-align: center;
          margin-bottom: 20px;
          padding-bottom: 10px;
          font-family: inherit;
          color: var(--text-color);
          letter-spacing: 1.2px;
          text-shadow: none;
      }
      .inventory-items {
          display: flex;
          flex-direction: column;
          gap: 10px;
      }
      .inventory-item {
          display: flex;
          justify-content: space-between;
          padding: 5px;
          border: none;
          border-radius: 5px;
          color: var(--text-color);
          background: var(--window-bg);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          border: 1px solid var(--window-border);
      }

      /* Main game field */
      .farm-area {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          position: relative;
          width: 100%;
          min-height: 600px;
          padding: 40px 0;
          overflow: hidden;
      }
      .farm-scene {
          position: relative;
          width: 100%;
          max-width: 800px;
          height: 600px;
          margin: 0 auto;
          display: flex;
          align-items: center;
          justify-content: center;
      }
      /* Beds block fixed relative to viewport, always above waves */
      .garden-beds {
          position: fixed;
          bottom: calc(90px); /* 120px – wave height, 20px – extra offset */
          left: 50%;
          transform: translateX(-50%);
          display: flex;
          flex-direction: column;
          gap: 5px;
          z-index: 2;
      }
      .garden-bed {
          width: 150px;
          padding: 20px;
          background-color: transparent;
          position: relative;
          cursor: pointer;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          min-height: 60px;
      }
      .bed-ascii {
          color: var(--soil-color);
          font-size: 0.7rem;
          line-height: 1.2;
          white-space: pre;
          font-family: monospace;
          text-align: center;
          user-select: none;
          margin-bottom: 5px;
      }
      .plant {
          position: absolute;
          top: 43%;
          left: 50%;
          transform: translateX(-50%);
          font-size: 1.7rem;
          z-index: 3;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-top: -10px;
          user-select: none;
      }
      @keyframes waterDrop {
          0% { transform: translate(-50%, -100%); opacity: 1; }
          100% { transform: translate(-50%, 0); opacity: 0; }
      }
      @keyframes seedPlant {
          0% { transform: translate(-50%, -100%) rotate(0deg); opacity: 1; }
          100% { transform: translate(-50%, 0) rotate(360deg); opacity: 0; }
      }
      @keyframes harvestCut {
          0% { transform: rotate(0deg); }
          30% { transform: rotate(-30deg); }
          60% { transform: rotate(15deg); }
          100% { transform: rotate(0deg); }
      }
      .water-animation, .seed-animation, .harvest-animation {
          position: absolute;
          top: 40%;
          left: 50%;
          transform-origin: center;
          transform: translate(-50%, -50%);
          z-index: 4;
      }
      .action-animation {
          position: absolute;
          top: 20%;
          left: 50%;
          font-size: 2rem;
          z-index: 4;
          transform: translateX(-50%);
      }
      .seed-animation {
          animation: seedPlant 1s ease-out forwards;
      }
      .water-animation {
          animation: waterDrop 1s ease-out forwards;
      }
      .harvest-animation {
          animation: harvestCut 1s ease-out forwards;
      }
      .action-icon {
          position: absolute;
          top: -30px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 2rem;
          background: var(--window-bg);
          border-radius: 50%;
          padding: 5px;
          cursor: pointer;
          z-index: 5;
          user-select: none;
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
      }
      .action-icon.selected {
          outline: 2px solid var(--accent-color);
      }
      .timer {
          position: absolute;
          top: 50%;
          left: 100%;
          transform: translate(8px, -50%);
          background: var(--window-bg);
          padding: 4px 12px;
          border-radius: 10px;
          font-size: 1.2rem;
          z-index: 5;
          color: var(--text-color);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          border: 1px solid var(--window-border);
          writing-mode: horizontal-tb;
          white-space: nowrap;
          letter-spacing: 0.05em;
          font-variant-numeric: tabular-nums;
      }
      .tx-status {
          position: absolute;
          top: 10%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: var(--window-bg);
          padding: 4px 10px;
          border-radius: 10px;
          font-size: 1rem;
          z-index: 5;
          color: var(--text-color);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          border: 1px solid var(--window-border);
          white-space: nowrap;
      }
      .clouds {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 40vh;
          z-index: 0;
          pointer-events: none;
          overflow: hidden;
      }
      .cloud {
          position: absolute;
          white-space: nowrap;
          opacity: 0.4;
          will-change: transform;
          transform-origin: center;
      }
      .clouds .cloud:nth-child(even) { transform: scaleX(-1); }
      @keyframes floatRight { from { left: -40%; } to { left: 120%; } }
      @keyframes floatLeft { from { left: 120%; } to { left: -40%; } }
      /* Cloud variants to avoid inline styles */
      .cloud--1 { top: 5%; font-size: 10rem; animation: floatRight 85s infinite linear; animation-delay: -20s; }
      .cloud--2 { top: 38%; font-size: 9rem; animation: floatLeft 88s infinite linear; animation-delay: -10s; }
      .cloud--3 { top: 18%; font-size: 13rem; animation: floatLeft 95s infinite linear; animation-delay: 15s; }
      .cloud--4 { top: 28%; font-size: 8rem; animation: floatRight 78s infinite linear; animation-delay: 5s; }
      .waves {
          position: fixed;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 120px;
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
          overflow: hidden;
          z-index: 0;
          font-family: monospace;
          color: var(--icon-color);
          background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.05));
          line-height: 1.2;
          font-size: 16px;
          transition: background 1.5s ease;
      }
      .wave-line {
          min-width: 200%;
          white-space: nowrap;
          opacity: 0.8;
          text-shadow: none;
      }
      .wave-line:nth-child(odd) { animation: waveRight 40s linear infinite; }
      .wave-line:nth-child(even) { animation: waveLeft 30s linear infinite; }
      @keyframes waveRight { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
      @keyframes waveLeft { 0% { transform: translateX(-50%); } 100% { transform: translateX(0); } }
      .waves.dark-wave {
          background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.3));
      }
      @keyframes darkWaveFlash { from { background-position: 0; } to { background-position: -50%; } }
      .wave-animation { animation: darkWaveFlash 2s ease; }
      .trees {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          z-index: 1;
          overflow: hidden;
      }
      .tree {
          position: fixed;
          color: var(--tree-color);
          font-size: 1.2rem;
          line-height: 1;
          white-space: pre;
          font-family: monospace;
          user-select: none;
          transform-origin: center bottom;
      }
      .tree:nth-child(1) {
          left: 15vw;
          top: 45vh;
          transform: scale(1.8);
          z-index: 2;
      }
      .tree:nth-child(2) {
          left: 70vw;
          top: 60vh;
          transform: scale(1.6);
          z-index: 3;
      }
      .tree:nth-child(3) {
          left: 80vw;
          top: 20vh;
          transform: scale(0.9);
          z-index: 1;
      }
      .tree:nth-child(4) {
          left: 8vw;
          top: 20vh;
          transform: scale(1.1);
          z-index: 1;
      }
      .tree:nth-child(5) {
          left: 55vw;
          top: 30vh;
          transform: scale(1.2);
          z-index: 2;
      }

      /* Modal styles (standard and custom) */
      .modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          justify-content: center;
          align-items: center;
          z-index: 1000;
          content-visibility: auto;
      }
      .modal.open { display: flex; }
      .modal-content {
          background: linear-gradient(
            135deg,
            rgba(255,255,255,0.75) 0%,
            rgba(255,255,255,0.45) 100%
          );
          padding: 20px;
          border-radius: 18px;
          text-align: center;
          max-width: 90%;
          width: 500px;
          box-shadow: var(--window-shadow);
          font-family: inherit;
          letter-spacing: 1.5px;
          color: var(--text-color);
          text-shadow: none;
          transition: background-color 1.5s ease, color 1.5s ease, border-color 1.5s ease;
          content-visibility: auto;
      }
      .modal-content::before {
          content: '';
          display: block;
          position: absolute;
          top: 0; left: 0; right: 0; height: 32px;
          background: var(--window-bg);
          border-bottom: 2px solid var(--border-color);
          border-radius: 16px 16px 0 0;
          z-index: 1;
      }
      .modal-content::after {
          content: '✕';
          position: absolute;
          top: 6px; right: 16px;
           color: var(--text-color);
          font-size: 1.2rem;
          cursor: pointer;
          z-index: 2;
          text-shadow: none;
      }
      .btn {
          background: var(--window-bg);
          color: var(--text-color);
          border: none;
          border-radius: 12px;
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          padding: 8px 15px;
          cursor: pointer;
          margin-top: 10px;
          font-family: inherit;
          font-weight: bold;
          text-transform: uppercase;
          transition: filter 0.2s;
      }
      .btn:hover {
          filter: brightness(1.1);
      }
      
      /* Shop styles */
      .shop-toggle {
          position: fixed;
          top: 20px;
          right: 20px;
          background: var(--window-bg);
          border: none;
          border-radius: 15px;
          padding: 5px 10px;
          cursor: pointer;
          z-index: 100;
          font-size: 1.5rem;
          color: var(--icon-color);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: background-color 1.5s ease, color 1.5s ease;
      }
      .shop-panel {
          position: fixed;
          right: 0;
          top: 0;
          height: 100vh;
          width: 250px;
          background: var(--window-bg);
          border: 1px solid var(--window-border);
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: transform 0.3s ease, background-color 1.5s ease, color 1.5s ease, box-shadow 1.5s ease;
          transform: translateX(100%);
          z-index: 99;
          padding: 70px 15px 20px;
          overflow-y: auto;
          content-visibility: auto;
          will-change: transform;
          backface-visibility: hidden;
          transform-style: preserve-3d;
      }
      .shop-panel.open {
          transform: translateX(0);
      }
      .shop-title {
          font-size: 1.3rem;
          text-align: center;
          margin-bottom: 20px;
          padding-bottom: 10px;
          font-family: inherit;
          color: var(--text-color);
          letter-spacing: 1.2px;
          text-shadow: none;
      }
      .shop-items {
          display: flex;
          flex-direction: column;
          gap: 10px;
      }

      /* Custom modal for messages */
      .custom-modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(20, 20, 20, 0.8);
          align-items: center;
          justify-content: center;
          z-index: 1100;
          content-visibility: auto;
      }
      .custom-modal.open { display: flex; }
      .custom-modal-content {
          background: linear-gradient(
            135deg,
            rgba(255,255,255,0.75) 0%,
            rgba(255,255,255,0.45) 100%
          );
          padding: 20px;
          border-radius: 10px;
          text-align: center;
          max-width: 80%;
          width: 400px;
          position: relative;
          box-shadow: var(--window-shadow);
          color: var(--text-color);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          transition: background-color 1.5s ease, color 1.5s ease;
      }
      .custom-modal-button {
          margin-top: 10px;
          background: var(--window-bg);
          color: var(--text-color);
          border-radius: 12px;
          box-shadow: var(--window-shadow);
          -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          backdrop-filter: blur(var(--glass-blur)) saturate(180%);
          padding: 8px 15px;
          cursor: pointer;
          font-family: inherit;
          font-weight: bold;
          text-transform: uppercase;
          transition: filter 0.2s;
      }
      .custom-modal-button:hover {
          filter: brightness(1.1);
      }

      /* Dark mode — пастельная инверсия */
      .dark-mode {
          /* базовая инверсия оттенков с пастельными тономи */
          --main-bg-color: #111214;
          --text-color: #e9e6e2;
          --icon-color: #e9e6e2;
          --accent-color: #9aa3a9;
          --border-color: #4b4f54;
          --glass-bg: linear-gradient(to bottom, rgba(26, 28, 31, 0.55), rgba(26, 28, 31, 0.2));
          --glass-border: rgba(255, 255, 255, 0.08);
          --glass-shadow: 0 6px 20px rgba(0, 0, 0, 0.5), 0 1px 0 rgba(255, 255, 255, 0.06);
          --window-bg: var(--glass-bg);
          --window-border: var(--glass-border);
          --window-shadow: var(--glass-shadow);
          --background-gradient: linear-gradient(to bottom, #1a1c1f, #24262a);
          /* палитра элементов — приглушённые пастельные инверсии */
          --soil-color: #8d867a;
          --fence-color: #8a7f72;
          --well-color: #7c838c;
          --cloud-color: #979aa0;
          --grass-color: #7f8a7f;
          --tree-color: #8a7f72;
          color: var(--text-color);
      }
      
      /* Extension block to ensure scrolling */
      .page-extension {
          height: 150vh;
      }
      .page-extension.is-hidden { display: none; }
      
      @media (max-width: 600px) {
          .farm-scene {
              height: 80vh;
              max-width: 100%;
              padding: 10px;
          }
          /* Adjust bed positioning for mobile */
          .garden-beds {
              bottom: calc(120px + 10px); /* smaller extra offset */
              gap: 5px;
          }
          .garden-bed {
              width: 150px;        /* reduced width */
              padding: 15px;       /* reduced padding */
              min-height: 90px;    /* reduced minimum height */
          }
          .timer { transform: translate(6px, -50%); font-size: 1rem; }
          .tree {
              font-size: 1rem;
          }
          .farm-area, .farm-scene {
              overflow: hidden;
          }
      }

      @media (prefers-reduced-motion: reduce) {
          .wave-line,
          .cloud {
              animation: none !important;
          }
      }

      .error-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
          background-color: #f8f9fa;
          color: #dc3545;
          text-align: center;
          padding: 2rem;
      }

      .error-container h2 {
          margin-bottom: 1rem;
      }

      .error-container button {
          padding: 0.5rem 1rem;
          background-color: #dc3545;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.2s;
      }

      .error-container button:hover {
          background-color: #c82333;
      }

/* Toast message styling */
.fg-toast {
  opacity: 0;
  animation: fgToastIn 180ms ease-out forwards;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  pointer-events: none;
}
.ascii-grass-wave { opacity: 0.85; }
@keyframes grassWave {
  0% { transform: translateX(0); }
  50% { transform: translateX(-10px); }
  100% { transform: translateX(0); }
}
.sky-orb {
  position: fixed;
  top: 6vh;
  left: 8vw;
  font-size: 8.8rem; /* 4x */
  line-height: 1;
  background: transparent;
  border: none;
  cursor: pointer;
  z-index: 2;
  user-select: none;
  -webkit-user-select: none;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,0.25));
  text-shadow:
    0 0 18px rgba(255, 210, 0, 0.55),
    0 0 36px rgba(255, 210, 0, 0.35),
    0 0 54px rgba(255, 210, 0, 0.25);
}
.sky-orb.is-moon {
  text-shadow:
    0 0 18px rgba(130, 170, 255, 0.55),
    0 0 36px rgba(130, 170, 255, 0.35),
    0 0 54px rgba(130, 170, 255, 0.25);
}
.dark-mode .sky-orb { filter: drop-shadow(0 6px 12px rgba(0,0,0,0.45)); }

@keyframes fgToastIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .fg-toast { animation: none; opacity: 1; }
}
